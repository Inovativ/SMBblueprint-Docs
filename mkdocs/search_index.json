{
    "docs": [
        {
            "location": "/",
            "text": "Welcome to the SMB Blueprint\n\u00b6\n\n\nThe \nSMB Blueprint\n solution accelerator is a fast go to market solution to onboard Azure and Office 365.\n\n\nThe Microsoft Cloud platform consists of a vast set of technologies that allow businesses to get productive very rapidly. \n\nWhile the provisioning of IT resources has become a fast process, their design is still the resposibility of the business owners.\n\nFor small businesses that just want to get to work without spending budget and effort into their IT platform,\n\nthis turnkey solution has been build. This solution allows either the business owner or their hosting partners\n\nto quickly rollout an IT environment that adheres to Microsoft's best-practices and standards.\n\n\nOverview\n\u00b6\n\n\nThe solution consists of 2 building blocks. A PowerShell module and a set of Azure resource manager\ntemplates.\nThe PowerShell module allows the execution of;\n\n\n\n\nThe Infrastructure in Azure consisting of 1 or more Virtual Machines and management resources\n\n\nThe Office 365 deployment, consisting of users, groups, etc \n\n\n\n\n\n\nInformation on how to use the fast track solution can be found in the installation guide.\n\n\nFor technical information, browse to 'Technical overview', which contains, per deployment option, the\ntechnical details \n\n\nTarget Audience\n\u00b6\n\n\nThe targetted Audience are the CSP (Cloud Service Provider) partners. They can benefit from this solution\naccelerator to onboard new client using a fast track.\n\n\nAdditional info\n\u00b6\n\n\nThe solution can be used 'as is' to onboard client into Office 365 and\\or Azure. If the need exists\nthe provided scripts and templates can be leveraged as a starting point or can be directly integrated\ninto existing portals and offerings.",
            "title": "Introduction"
        },
        {
            "location": "/#welcome-to-the-smb-blueprint",
            "text": "The  SMB Blueprint  solution accelerator is a fast go to market solution to onboard Azure and Office 365.  The Microsoft Cloud platform consists of a vast set of technologies that allow businesses to get productive very rapidly.  \nWhile the provisioning of IT resources has become a fast process, their design is still the resposibility of the business owners. \nFor small businesses that just want to get to work without spending budget and effort into their IT platform, \nthis turnkey solution has been build. This solution allows either the business owner or their hosting partners \nto quickly rollout an IT environment that adheres to Microsoft's best-practices and standards.",
            "title": "Welcome to the SMB Blueprint"
        },
        {
            "location": "/#overview",
            "text": "The solution consists of 2 building blocks. A PowerShell module and a set of Azure resource manager\ntemplates.\nThe PowerShell module allows the execution of;   The Infrastructure in Azure consisting of 1 or more Virtual Machines and management resources  The Office 365 deployment, consisting of users, groups, etc     Information on how to use the fast track solution can be found in the installation guide.  For technical information, browse to 'Technical overview', which contains, per deployment option, the\ntechnical details",
            "title": "Overview"
        },
        {
            "location": "/#target-audience",
            "text": "The targetted Audience are the CSP (Cloud Service Provider) partners. They can benefit from this solution\naccelerator to onboard new client using a fast track.",
            "title": "Target Audience"
        },
        {
            "location": "/#additional-info",
            "text": "The solution can be used 'as is' to onboard client into Office 365 and\\or Azure. If the need exists\nthe provided scripts and templates can be leveraged as a starting point or can be directly integrated\ninto existing portals and offerings.",
            "title": "Additional info"
        },
        {
            "location": "/install/",
            "text": "Installation Guideliness\n\u00b6\n\n\nUsing the solution accelerator is quite simple, but some pre-requisites need to met.\n\n\nPrerequisites\n\u00b6\n\n\nthe following pre-requisites need to be met before installing the solution accelerator:\n\n\nPowerShell packagemanager\n\u00b6\n\n\nInstalling items from the Gallery requires the latest version of the PowerShellGet module, which is \navailable in Windows 10, in Windows Management Framework (WMF) 5.0, \nor in the MSI-based installer (for PowerShell 3 and 4).\n\n\n\n\n\n\nGet windows 10\n\n\n\n\n\n\nGet latest WMF (windows Management Framework)\n\n\n\n\n\n\nGet PowerShellGet for PowerShell 3 & 4\n\n\n\n\n\n\nPowerShell modules\n\u00b6\n\n\nThe \nSMBblueprint\n module depends on several other PowerShell modules.\nMost of these modules are also available on the \nPowerShell Gallery\n \nand will automatically install if not already present.\n\n\nSharePoint Online Management Shell\n\u00b6\n\n\nThe SharePoint online Management shell is not available on the \nPowerShell Gallery\n\nand requires a seperate install.\n\n\nYou can download the SharePoint Online Management Shell from the \nMicrosoft Download Center\n.\n\n\nInstallation\n\u00b6\n\n\nOpen a PowerShell prompt as Administrator (right click and select \n'Runas Administrator'\n)\n\n\nlocate the \nSMB Blueprint\n PowerShell module and install the module\nIf you cannot install the module using administrative access, you can use the \n-scope currentUser\n parameter and value.\n\n\n\n\nYou might receive a prompt to install nuget.exe\n\nYou might be asked for confirmation to install\n\nAdministrator rights are needed or install the module in the currentUser scope\n\n\n\n\nInstall-Module -Name SMBblueprint -scope currentUser -Force\n\n\n\n\n\n\nYou can verify the installation by executing the following:\n\n\nGet-module -listAvailable | where-Object {$_.Name -like 'SMBblueprint'}\n\n\n\n\n\n\nImport the module to load the functions\n\n\nimport-module -Name SMBblueprint\n\n\n\n\n\n\nThe SMBblueprint PowerShell module contains 3 public functions\n\n\nGet-command -Module SMBBlueprint\n\n\n\n\n\n\nNext Steps\n\u00b6\n\n\nLocate the Guideliness to get started with \nOffice 365\n deployments or the \nAzure\n deployment",
            "title": "installation"
        },
        {
            "location": "/install/#installation-guideliness",
            "text": "Using the solution accelerator is quite simple, but some pre-requisites need to met.",
            "title": "Installation Guideliness"
        },
        {
            "location": "/install/#prerequisites",
            "text": "the following pre-requisites need to be met before installing the solution accelerator:",
            "title": "Prerequisites"
        },
        {
            "location": "/install/#powershell-packagemanager",
            "text": "Installing items from the Gallery requires the latest version of the PowerShellGet module, which is \navailable in Windows 10, in Windows Management Framework (WMF) 5.0, \nor in the MSI-based installer (for PowerShell 3 and 4).    Get windows 10    Get latest WMF (windows Management Framework)    Get PowerShellGet for PowerShell 3 & 4",
            "title": "PowerShell packagemanager"
        },
        {
            "location": "/install/#powershell-modules",
            "text": "The  SMBblueprint  module depends on several other PowerShell modules.\nMost of these modules are also available on the  PowerShell Gallery  \nand will automatically install if not already present.",
            "title": "PowerShell modules"
        },
        {
            "location": "/install/#sharepoint-online-management-shell",
            "text": "The SharePoint online Management shell is not available on the  PowerShell Gallery \nand requires a seperate install.  You can download the SharePoint Online Management Shell from the  Microsoft Download Center .",
            "title": "SharePoint Online Management Shell"
        },
        {
            "location": "/install/#installation",
            "text": "Open a PowerShell prompt as Administrator (right click and select  'Runas Administrator' )  locate the  SMB Blueprint  PowerShell module and install the module\nIf you cannot install the module using administrative access, you can use the  -scope currentUser  parameter and value.   You might receive a prompt to install nuget.exe \nYou might be asked for confirmation to install \nAdministrator rights are needed or install the module in the currentUser scope   Install-Module -Name SMBblueprint -scope currentUser -Force   You can verify the installation by executing the following:  Get-module -listAvailable | where-Object {$_.Name -like 'SMBblueprint'}   Import the module to load the functions  import-module -Name SMBblueprint   The SMBblueprint PowerShell module contains 3 public functions  Get-command -Module SMBBlueprint",
            "title": "Installation"
        },
        {
            "location": "/install/#next-steps",
            "text": "Locate the Guideliness to get started with  Office 365  deployments or the  Azure  deployment",
            "title": "Next Steps"
        },
        {
            "location": "/office365-install/",
            "text": "Office 365 deployment\n\u00b6\n\n\nNow that you have the solution available on your computer, you can provision a tenant's Office 365 subscription using a\nGraphical user interface or using bare powershell commandlets.\n\nBoth are discussed below;\n\n\nFor an overview on how Office 365 resources are provisioned, please consult the \n\ntechnical documentation\n\n\nGraphical User interface\n\u00b6\n\n\nThe graphical user interface is contained in the PowerShell module you install in the previous steps.\nto launch the SMBblueprint GUI;\n\n\n\n\nClick the start button, type PowerShell and hit enter  \n\n\nIn the PowerShell prompt load the module\n\n\n\n\nImport-Module -Name SMBBlueprint\n\n\n\n\n\n\nTo start the Graphical user interface\n\n\n\n\nStart-SMBDeploymentGUI\n\n\n\n\n\n\nProvide your CSP credentials and click \nConnect\n and select the tenant you want to manage from the dropdown  \n\n\n\n\n\n\n\n\nSelect the 'Office 365' tab in the task pane on the left\n\n\n\n\n\n\n\n\nProvide the to be provisioned users / groups by importing a CSV-list, or by entering the information manually\n\n\nThe default mail domain is shown at the bottom, and can be changed to a secondary domain name if needed\n\n\nThe domain must exist within the tenant's domain list!\n\n\n\n\n\n\nClick \nProvision Office 365\n to commence the deployment\n\n\nYou will be automatically directed to the log-pane for status monitoring\n\n\n\n\n\n\nPowerShell\n\u00b6\n\n\nAs this is a PowerShell module you can offcourse kick off a deployment using pure PowerShell.\nTo start a deployment follow the steps below;\n\n\n\n\nClick the start button, type PowerShell and hit enter  \n\n\nIn the PowerShell prompt load the module\n\n\n\n\nImport-Module -Name SMBBlueprint\n\n\n\n\n\n\nExecute the PowerShell code below to start a deployment with specified parameters.  \n\n\n\n\nNew-SMBOfficeDeployment -DefaultPassword MySecretPassword -Credential $MyCredential -MailDomain contoso.com -CSV C:\\SMBUsers.csv -TenantId 95e2e584-5e01-4065-bcee-8203d1005a90\n\n\n\n\n\n\nThis example will use the information specified in the given CSV to provision a set of users and groups in the specified CSP tenant. The suffix '@Contoso.Com' will be used for the UPN of the users.",
            "title": "Office 365"
        },
        {
            "location": "/office365-install/#office-365-deployment",
            "text": "Now that you have the solution available on your computer, you can provision a tenant's Office 365 subscription using a\nGraphical user interface or using bare powershell commandlets. \nBoth are discussed below;  For an overview on how Office 365 resources are provisioned, please consult the  technical documentation",
            "title": "Office 365 deployment"
        },
        {
            "location": "/office365-install/#graphical-user-interface",
            "text": "The graphical user interface is contained in the PowerShell module you install in the previous steps.\nto launch the SMBblueprint GUI;   Click the start button, type PowerShell and hit enter    In the PowerShell prompt load the module   Import-Module -Name SMBBlueprint   To start the Graphical user interface   Start-SMBDeploymentGUI   Provide your CSP credentials and click  Connect  and select the tenant you want to manage from the dropdown       Select the 'Office 365' tab in the task pane on the left     Provide the to be provisioned users / groups by importing a CSV-list, or by entering the information manually  The default mail domain is shown at the bottom, and can be changed to a secondary domain name if needed  The domain must exist within the tenant's domain list!    Click  Provision Office 365  to commence the deployment  You will be automatically directed to the log-pane for status monitoring",
            "title": "Graphical User interface"
        },
        {
            "location": "/office365-install/#powershell",
            "text": "As this is a PowerShell module you can offcourse kick off a deployment using pure PowerShell.\nTo start a deployment follow the steps below;   Click the start button, type PowerShell and hit enter    In the PowerShell prompt load the module   Import-Module -Name SMBBlueprint   Execute the PowerShell code below to start a deployment with specified parameters.     New-SMBOfficeDeployment -DefaultPassword MySecretPassword -Credential $MyCredential -MailDomain contoso.com -CSV C:\\SMBUsers.csv -TenantId 95e2e584-5e01-4065-bcee-8203d1005a90   This example will use the information specified in the given CSV to provision a set of users and groups in the specified CSP tenant. The suffix '@Contoso.Com' will be used for the UPN of the users.",
            "title": "PowerShell"
        },
        {
            "location": "/azure-install/",
            "text": "Azure deployment\n\u00b6\n\n\nNow that you have the solution available on your computer, you can launch an azure deployment using an\nGraphical user interface or using bare powershell commandlets.\n\nBoth are discussed below;\n\n\nFor an overview of the resources deployed and their dependencies you can consult the \n\ntechnical documentation\n\n\nGraphical User interface\n\u00b6\n\n\nThe graphical user interface is contained in the PowerShell module you install in the previous steps.\nto launch the SMBblueprint GUI;\n\n\n\n\nClick the start button, type PowerShell and hit enter  \n\n\nIn the PowerShell prompt load the module\n\n\n\n\nImport-Module -Name SMBBlueprint\n\n\n\n\n\n\nTo start the Graphical user interface\n\n\n\n\nStart-SMBDeploymentGUI\n\n\n\n\n\n\nProvide your CSP credentials and click \nConnect\n and selec the tenant you want to manage from the dropdown  \n\n\n\n\n\n\n\n\nSelect the Azure tab in the taks pane on the left\n\n\nProvide the deployment characteristics\n\n\nSelect the correct subscription (in larger environments multiple subscriptions can exist)\n\n\nChoose a deployment category (for an overview of the different resources per category consult\n the \noverview\n)\n\n\nSelect any additional services needed\n\n\nan additional VM size\n\n\nan extra Azure SQL database\n\n\nBackup services (note; if selected all vm's deployed will be automatically protected)\n\n\nA VPN gateway (although you will still need to setup the connection)\n\n\n\n\n\n\nthe customer name or abbriviation. (this will be used as a prefix for all resource deployments \nand the domainname)  \n\n\n\n\n\n\n\n\n\n\n\n\nHit the \nDeploy Solution\n button\n\n\nThe deployment progress can be seen in the powershell prompt with the progress indicators\n\n\nIn addition, all actions are logged in a log file specific for this deployment. The logfile can be\n consulted by clicking \nLog\n in the left task pane  \n\n\n\n\n\n\nPowerShell\n\u00b6\n\n\nAs this is a PowerShell module you can offcourse kick off a deployment using pure PowerShell.\nTo start a deployment follow the steps below;\n\n\n\n\nClick the start button, type PowerShell and hit enter  \n\n\nIn the PowerShell prompt load the module\n\n\n\n\nImport-Module -Name SMBBlueprint\n\n\n\n\n\n\nExecute the PowerShell code below to start a deployment with specified parameters.\n\nThis example will deploy a small SMB scenario to the Contoso.com CSP tenant with the following resources:\n\n\n1 Essentials VM (small size)  \n\n\n1 Additional VM (medium size)\n\n\n1 Additional Azure SQL instance (small size)\n\n\n1 basic VPN gateway\n\n\nBackup of the essential and additional machines\n\n\n\n\n\n\n\n\n$properties = @{\n    CustomerName = 'Contoso'\n    CustomerSize = 'small'\n    TenantDomain = 'Contoso.com'\n    SysAdminPassword = $securePassword\n    Credential = $myCredential\n    SubscriptionId = '3812cde5-cb5e-42de-a673-20228eed897f'\n    AdditionalVMSize = 'medium'\n    AdditionalSQLInstanceSize = 'small'\n    VPN = 'basic'\n}\nStart-SMBBlueprintDeployment @properties",
            "title": "Azure"
        },
        {
            "location": "/azure-install/#azure-deployment",
            "text": "Now that you have the solution available on your computer, you can launch an azure deployment using an\nGraphical user interface or using bare powershell commandlets. \nBoth are discussed below;  For an overview of the resources deployed and their dependencies you can consult the  technical documentation",
            "title": "Azure deployment"
        },
        {
            "location": "/azure-install/#graphical-user-interface",
            "text": "The graphical user interface is contained in the PowerShell module you install in the previous steps.\nto launch the SMBblueprint GUI;   Click the start button, type PowerShell and hit enter    In the PowerShell prompt load the module   Import-Module -Name SMBBlueprint   To start the Graphical user interface   Start-SMBDeploymentGUI   Provide your CSP credentials and click  Connect  and selec the tenant you want to manage from the dropdown       Select the Azure tab in the taks pane on the left  Provide the deployment characteristics  Select the correct subscription (in larger environments multiple subscriptions can exist)  Choose a deployment category (for an overview of the different resources per category consult\n the  overview )  Select any additional services needed  an additional VM size  an extra Azure SQL database  Backup services (note; if selected all vm's deployed will be automatically protected)  A VPN gateway (although you will still need to setup the connection)    the customer name or abbriviation. (this will be used as a prefix for all resource deployments \nand the domainname)         Hit the  Deploy Solution  button  The deployment progress can be seen in the powershell prompt with the progress indicators  In addition, all actions are logged in a log file specific for this deployment. The logfile can be\n consulted by clicking  Log  in the left task pane",
            "title": "Graphical User interface"
        },
        {
            "location": "/azure-install/#powershell",
            "text": "As this is a PowerShell module you can offcourse kick off a deployment using pure PowerShell.\nTo start a deployment follow the steps below;   Click the start button, type PowerShell and hit enter    In the PowerShell prompt load the module   Import-Module -Name SMBBlueprint   Execute the PowerShell code below to start a deployment with specified parameters. \nThis example will deploy a small SMB scenario to the Contoso.com CSP tenant with the following resources:  1 Essentials VM (small size)    1 Additional VM (medium size)  1 Additional Azure SQL instance (small size)  1 basic VPN gateway  Backup of the essential and additional machines     $properties = @{\n    CustomerName = 'Contoso'\n    CustomerSize = 'small'\n    TenantDomain = 'Contoso.com'\n    SysAdminPassword = $securePassword\n    Credential = $myCredential\n    SubscriptionId = '3812cde5-cb5e-42de-a673-20228eed897f'\n    AdditionalVMSize = 'medium'\n    AdditionalSQLInstanceSize = 'small'\n    VPN = 'basic'\n}\nStart-SMBBlueprintDeployment @properties",
            "title": "PowerShell"
        },
        {
            "location": "/office365/",
            "text": "Office 365 User & Group Provisioning\n\u00b6\n\n\nIntroduction\n\u00b6\n\n\nOffice 365 customers can be managed by their hosting partners using the \nCSP model\n.\n\n\nThis allows for hosting partner personnel to administrate the subscription without needing any direct connection with the customer itself.\n\n\nSMBBlueprint simplifies the initial provisioning of O365 users and (private) Office groups for a CSP tenant by providing a Powershell-based deployment workflow.\n\n\nStarting the deployment\n\u00b6\n\n\nThe cmdlet \nNew-SMBOfficeDeployment\n can be used to initiate the deployment.\n\n\nThe deployment needs to be started with a certain set of parameters that specify both the connection info towards the target tenant (PowerShell-parameters), as well as a CSV file that contains the user and group payload to be provisioned.\n\n\nNote: For the full explanation of the parameters, refer to the PowerShell documentation of the Office deployment cmdlet.\n````\n### CSV\n\nThe deployment needs a valid CSV file with the following information:\n\n* First (the first-name of the user)\n* Last (the last-name of the user)\n* Title (the user's title or function)\n* DisplayName (currently not in use)\n* Department (the user's department)\n* Office (the user's office location)\n* Mobile (the user's mobile phone number)\n* Country (the user's country, expressed as an [ISO-code](https://www.iso.org/obp/ui/#search))\n* Groups (the group to which the user should belong)\n    * If the group is mentioned for the first time, the associated user will be set as owner. Subsequent users that have the same group specified will be a regular member.\n    * The created groups will be private Office Groups\n* License (the license to assign to the user, expressed as the SKU code, which can be found using get-msolaccountsku -TenantId \\<ID of your CSP tenant\\>)\n    * You can get the tenant-id's under your CSP account by connecting to your root Azure AD with 'Connect-MSOLService' and then querying the tenants with 'Get-MSOLPartnerContract -All|select DefaultDomainName,TenantId'\n\n>**Example CSV:**  \nFirst,Last,Title,DisplayName,Department,Office,Mobile,Country,Groups,License  \nJan,Van Meirvenne,Consultant,Jan.VanMeirvenne,ICT,Inovativ,32478707741,BE,TestGroup1,O365_BUSINESS_PREMIUM  \nJin,Van Meirvenne,Consultant,Jin.VanMeirvenne,ICT,Inovativ,32478707741,BE,TestGroup10,O365_BUSINESS_PREMIUM  \nJon,Van Meirvenne,Consultant,Jon.VanMeirvenne,ICT,Inovativ,32478707741,BE,TestGroup10,O365_BUSINESS_PREMIUM \n\n### Mail Domain\n\nBefore this solution is used, a validated custom domain needs to be present in the tenant's configuration.\nBy default, the tenant domain that is marked as default will be used as primary mail suffix. A specific domain can be chosen by providing the '-MailDomain <MailDomainName>' parameter (in the GUI, an option to control this is available as well).\n\n\n\n\nNote: While using the standard \n@onmicrosoft.com suffix is not blocked, the user won't be able to send/receive mails.\n```\n\n\nDefault Password\n\u00b6\n\n\nA parameter 'DefaultPassword' can be passed. This sets the initial logon for ALL users in the CSV to a specific password. If the parameter is omitted, a random password is generated.\n\n\nPreflight check\n\u00b6\n\n\nBefore starting the provisioning, a few conditions are checked:\n\n The CSP credential must be valid\n\n The entered Tenant ID or Domain must be present in the CSP partner's directory\n*\n Note: Do not confuse the tenant-domain with the tenant's own domains. The tenant domain is the value that is shown in the CSP portal, and not the tenant's admin portal!\n\n The licenses specified in the CSV-file must not be more that the ones available in the subscription\n\n\nCSP Admin account\n\u00b6\n\n\nNot all resources can be reliably deployed by the CSP model currently. This consists of:\n\n Onedrive For Business\n\n Office 365 groups\n\n\nTo work around this limitation, the deployment will use the CSP credential to create an admin user within the tenant itself, and proceed to use this last one to configure the restricted resources.\nThe password for this user is randomly generated and renewed everytime the SMbBlueprint solution is ran. This means that the CSP admin user can not be used for login without manually resetting the password.\nThe password is not stored in any outputs.\n\n\nProvisioning\n\u00b6\n\n\nWhen all checks are passed OK, the CSV information is used to commence the actual provisioning.\n\n\nThis happens in the following order:\n1) Create the users in the tenant's Azure AD, set the password and license information\n\n If a user already exists, no action is performed\n2) Connect to the Exchange interface of O365 and create the groups. Assign ownership based on the CSV-information.\n\n If a group already exists, no action is performed\n3) Populate the standard memberships for the created groups\n4) Bulk provision all created users' OneDrive using the Sharepoint Online Management shell\n\n\nReview\n\u00b6\n\n\nWhen the provisioning completes, an object is returned containing the following information:\n\n Type (the deployment-type. This will be 'Office' for deployments started with this function)\n\n Duration (the duration of the deployment)\n\n Status (Provides status-information for the deployment)\n    * Configuration (contains several outputs of the deployment)\n        * ProvisionedUsers (a list of all provisioned users including login-information)\n        * ProvisionedGroups (a list of all provisioned office groups)\n\n Completed (equals 'TRUE' if the deployment is done)\n\n Error (if an exception occured during the deployment, it will be stored here)\n\n Log (the full location of the logfile for the deployment)",
            "title": "Office 365"
        },
        {
            "location": "/office365/#office-365-user-group-provisioning",
            "text": "",
            "title": "Office 365 User &amp; Group Provisioning"
        },
        {
            "location": "/office365/#introduction",
            "text": "Office 365 customers can be managed by their hosting partners using the  CSP model .  This allows for hosting partner personnel to administrate the subscription without needing any direct connection with the customer itself.  SMBBlueprint simplifies the initial provisioning of O365 users and (private) Office groups for a CSP tenant by providing a Powershell-based deployment workflow.",
            "title": "Introduction"
        },
        {
            "location": "/office365/#starting-the-deployment",
            "text": "The cmdlet  New-SMBOfficeDeployment  can be used to initiate the deployment.  The deployment needs to be started with a certain set of parameters that specify both the connection info towards the target tenant (PowerShell-parameters), as well as a CSV file that contains the user and group payload to be provisioned.  Note: For the full explanation of the parameters, refer to the PowerShell documentation of the Office deployment cmdlet.\n````\n### CSV\n\nThe deployment needs a valid CSV file with the following information:\n\n* First (the first-name of the user)\n* Last (the last-name of the user)\n* Title (the user's title or function)\n* DisplayName (currently not in use)\n* Department (the user's department)\n* Office (the user's office location)\n* Mobile (the user's mobile phone number)\n* Country (the user's country, expressed as an [ISO-code](https://www.iso.org/obp/ui/#search))\n* Groups (the group to which the user should belong)\n    * If the group is mentioned for the first time, the associated user will be set as owner. Subsequent users that have the same group specified will be a regular member.\n    * The created groups will be private Office Groups\n* License (the license to assign to the user, expressed as the SKU code, which can be found using get-msolaccountsku -TenantId \\<ID of your CSP tenant\\>)\n    * You can get the tenant-id's under your CSP account by connecting to your root Azure AD with 'Connect-MSOLService' and then querying the tenants with 'Get-MSOLPartnerContract -All|select DefaultDomainName,TenantId'\n\n>**Example CSV:**  \nFirst,Last,Title,DisplayName,Department,Office,Mobile,Country,Groups,License  \nJan,Van Meirvenne,Consultant,Jan.VanMeirvenne,ICT,Inovativ,32478707741,BE,TestGroup1,O365_BUSINESS_PREMIUM  \nJin,Van Meirvenne,Consultant,Jin.VanMeirvenne,ICT,Inovativ,32478707741,BE,TestGroup10,O365_BUSINESS_PREMIUM  \nJon,Van Meirvenne,Consultant,Jon.VanMeirvenne,ICT,Inovativ,32478707741,BE,TestGroup10,O365_BUSINESS_PREMIUM \n\n### Mail Domain\n\nBefore this solution is used, a validated custom domain needs to be present in the tenant's configuration.\nBy default, the tenant domain that is marked as default will be used as primary mail suffix. A specific domain can be chosen by providing the '-MailDomain <MailDomainName>' parameter (in the GUI, an option to control this is available as well).  Note: While using the standard  @onmicrosoft.com suffix is not blocked, the user won't be able to send/receive mails.\n```",
            "title": "Starting the deployment"
        },
        {
            "location": "/office365/#default-password",
            "text": "A parameter 'DefaultPassword' can be passed. This sets the initial logon for ALL users in the CSV to a specific password. If the parameter is omitted, a random password is generated.",
            "title": "Default Password"
        },
        {
            "location": "/office365/#preflight-check",
            "text": "Before starting the provisioning, a few conditions are checked:  The CSP credential must be valid  The entered Tenant ID or Domain must be present in the CSP partner's directory\n*  Note: Do not confuse the tenant-domain with the tenant's own domains. The tenant domain is the value that is shown in the CSP portal, and not the tenant's admin portal!  The licenses specified in the CSV-file must not be more that the ones available in the subscription",
            "title": "Preflight check"
        },
        {
            "location": "/office365/#csp-admin-account",
            "text": "Not all resources can be reliably deployed by the CSP model currently. This consists of:  Onedrive For Business  Office 365 groups  To work around this limitation, the deployment will use the CSP credential to create an admin user within the tenant itself, and proceed to use this last one to configure the restricted resources.\nThe password for this user is randomly generated and renewed everytime the SMbBlueprint solution is ran. This means that the CSP admin user can not be used for login without manually resetting the password.\nThe password is not stored in any outputs.",
            "title": "CSP Admin account"
        },
        {
            "location": "/office365/#provisioning",
            "text": "When all checks are passed OK, the CSV information is used to commence the actual provisioning.  This happens in the following order:\n1) Create the users in the tenant's Azure AD, set the password and license information  If a user already exists, no action is performed\n2) Connect to the Exchange interface of O365 and create the groups. Assign ownership based on the CSV-information.  If a group already exists, no action is performed\n3) Populate the standard memberships for the created groups\n4) Bulk provision all created users' OneDrive using the Sharepoint Online Management shell",
            "title": "Provisioning"
        },
        {
            "location": "/office365/#review",
            "text": "When the provisioning completes, an object is returned containing the following information:  Type (the deployment-type. This will be 'Office' for deployments started with this function)  Duration (the duration of the deployment)  Status (Provides status-information for the deployment)\n    * Configuration (contains several outputs of the deployment)\n        * ProvisionedUsers (a list of all provisioned users including login-information)\n        * ProvisionedGroups (a list of all provisioned office groups)  Completed (equals 'TRUE' if the deployment is done)  Error (if an exception occured during the deployment, it will be stored here)  Log (the full location of the logfile for the deployment)",
            "title": "Review"
        },
        {
            "location": "/azure-arm-intro/",
            "text": "Azure Resource Manager\n\u00b6\n\n\nThe infrastructure for your application is typically made up of many components \u2013 maybe a virtual machine, storage account, and virtual network, or a web app, database, database server, and 3rd party services. You do not see these components as separate entities, instead you see them as related and interdependent parts of a single entity. You want to deploy, manage, and monitor them as a group. Azure Resource Manager enables you to work with the resources in your solution as a group. You can deploy, update, or delete all the resources for your solution in a single, coordinated operation. You use a template for deployment and that template can work for different environments such as testing, staging, and production. Resource Manager provides security, auditing, and tagging features to help you manage your resources after deployment.\n\n\nTerminology\n\u00b6\n\n\nIf you are new to Azure Resource Manager, there are some terms you might not be familiar with.\n\n\n\n\nresource\n - A manageable item that is available through Azure. Some common resources are a virtual machine, storage account, web app, database, and virtual network, but there are many more.\n\n\nresource group\n - A container that holds related resources for an Azure solution. The resource group can include all the resources for the solution, or only those resources that you want to manage as a group. You decide how you want to allocate resources to resource groups based on what makes the most sense for your organization. See Resource groups.\n\n\nresource provider\n - A service that supplies the resources you can deploy and manage through Resource Manager. Each resource provider offers operations for working with the resources that are deployed. Some common resource providers are Microsoft.Compute, which supplies the virtual machine resource, Microsoft.Storage, which supplies the storage account resource, and Microsoft.Web, which supplies resources related to web apps. See Resource providers.\n\n\nResource Manager template\n - A JavaScript Object Notation (JSON) file that defines one or more resources to deploy to a resource group. It also defines the dependencies between the deployed resources. The template can be used to deploy the resources consistently and repeatedly. See Template deployment.\n\n\ndeclarative syntax\n - Syntax that lets you state \"Here is what I intend to create\" without having to write the sequence of programming commands to create it. The Resource Manager template is an example of declarative syntax. In the file, you define the properties for the infrastructure to deploy to Azure.\n\n\n\n\nThe benefits of using Resource Manager\n\u00b6\n\n\n\n\nResource Manager provides several benefits:\n\n\n\n\n\n\nYou can deploy, manage, and monitor all the resources for your solution as a group, rather than handling these resources individually.  \n\n\n\n\n\n\nYou can repeatedly deploy your solution throughout the development lifecycle and have confidence your resources are deployed in a consistent state.\n\n\n\n\n\n\nYou can manage your infrastructure through declarative templates rather than scripts.\n\n\n\n\n\n\nYou can define the dependencies between resources so they are deployed in the correct order.\n\n\n\n\n\n\nYou can apply access control to all services in your resource group because Role-Based Access Control (RBAC) is natively integrated into the management platform.\n\n\n\n\n\n\nYou can apply tags to resources to logically organize all the resources in your subscription.\n\n\n\n\n\n\nYou can clarify your organization's billing by viewing costs for a group of resources sharing the same tag.\n\n\n\n\n\n\nTemplate deployment\n\u00b6\n\n\nWith Resource Manager, you can create a template (in JSON format) that defines the infrastructure and configuration of your Azure solution. By using a template, you can repeatedly deploy your solution throughout its lifecycle and have confidence your resources are deployed in a consistent state. When you create a solution from the portal, the solution automatically includes a deployment template. You do not have to create your template from scratch because you can start with the template for your solution and customize it to meet your specific needs. You can retrieve a template for an existing resource group by either exporting the current state of the resource group, or viewing the template used for a particular deployment. Viewing the exported template is a helpful way to learn about the template syntax.\n\n\nIn its simplest form, a template contains the following elements:\n\n\nCopy\n{\n  \"$schema\": \"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n  \"contentVersion\": \"\",\n  \"parameters\": {  },\n  \"variables\": {  },\n  \"resources\": [  ],\n  \"outputs\": {  }\n}\n\n\n\n\nIn the \nparameters element\n, you specify values that enable customization and flexibility in deployment.\n For example, you can pass parameter values that tailor deployment for your test environment. \n By specifying the parameters, you can use the same template to deploy your solution to different environments.\n\n\nIn the \nvariables element\n, you specify values that are reused throughout the template, or values\n that are constructed from other values (like parameters).\n\n\nIn the \nresources element\n, you specify the components of your infrastructure. \nYou define as many resources as your solution needs.\n\n\nIn the \noutputs element\n, you specify any values that are returned from the deployment \n(such as URIs from deployed resources).\n\n\nAzure Resource Manager analyzes dependencies to ensure resources are created in the correct order. \nIf one resource relies on a value from another resource (such as a virtual machine needing a storage \naccount for disks), you set a dependency.\n\n\nYou do not have to define your entire infrastructure in a single template. Often, it makes sense to \ndivide your deployment requirements into a set of targeted, purpose-specific templates. \nYou can easily reuse these templates for different solutions. To deploy a particular solution, \nyou create a master template that links all the required templates.\n\n\nYou can also use the template for updates to the infrastructure. For example, you can add a resource\n to your solution and add configuration rules for the resources that are already deployed. \n If the template specifies creating a resource but that resource already exists, \n Azure Resource Manager performs an update instead of creating a new asset. Azure Resource Manager \n updates the existing asset to the same state as it would be as new.",
            "title": "Resource Manager introduction"
        },
        {
            "location": "/azure-arm-intro/#azure-resource-manager",
            "text": "The infrastructure for your application is typically made up of many components \u2013 maybe a virtual machine, storage account, and virtual network, or a web app, database, database server, and 3rd party services. You do not see these components as separate entities, instead you see them as related and interdependent parts of a single entity. You want to deploy, manage, and monitor them as a group. Azure Resource Manager enables you to work with the resources in your solution as a group. You can deploy, update, or delete all the resources for your solution in a single, coordinated operation. You use a template for deployment and that template can work for different environments such as testing, staging, and production. Resource Manager provides security, auditing, and tagging features to help you manage your resources after deployment.",
            "title": "Azure Resource Manager"
        },
        {
            "location": "/azure-arm-intro/#terminology",
            "text": "If you are new to Azure Resource Manager, there are some terms you might not be familiar with.   resource  - A manageable item that is available through Azure. Some common resources are a virtual machine, storage account, web app, database, and virtual network, but there are many more.  resource group  - A container that holds related resources for an Azure solution. The resource group can include all the resources for the solution, or only those resources that you want to manage as a group. You decide how you want to allocate resources to resource groups based on what makes the most sense for your organization. See Resource groups.  resource provider  - A service that supplies the resources you can deploy and manage through Resource Manager. Each resource provider offers operations for working with the resources that are deployed. Some common resource providers are Microsoft.Compute, which supplies the virtual machine resource, Microsoft.Storage, which supplies the storage account resource, and Microsoft.Web, which supplies resources related to web apps. See Resource providers.  Resource Manager template  - A JavaScript Object Notation (JSON) file that defines one or more resources to deploy to a resource group. It also defines the dependencies between the deployed resources. The template can be used to deploy the resources consistently and repeatedly. See Template deployment.  declarative syntax  - Syntax that lets you state \"Here is what I intend to create\" without having to write the sequence of programming commands to create it. The Resource Manager template is an example of declarative syntax. In the file, you define the properties for the infrastructure to deploy to Azure.",
            "title": "Terminology"
        },
        {
            "location": "/azure-arm-intro/#the-benefits-of-using-resource-manager",
            "text": "Resource Manager provides several benefits:    You can deploy, manage, and monitor all the resources for your solution as a group, rather than handling these resources individually.      You can repeatedly deploy your solution throughout the development lifecycle and have confidence your resources are deployed in a consistent state.    You can manage your infrastructure through declarative templates rather than scripts.    You can define the dependencies between resources so they are deployed in the correct order.    You can apply access control to all services in your resource group because Role-Based Access Control (RBAC) is natively integrated into the management platform.    You can apply tags to resources to logically organize all the resources in your subscription.    You can clarify your organization's billing by viewing costs for a group of resources sharing the same tag.",
            "title": "The benefits of using Resource Manager"
        },
        {
            "location": "/azure-arm-intro/#template-deployment",
            "text": "With Resource Manager, you can create a template (in JSON format) that defines the infrastructure and configuration of your Azure solution. By using a template, you can repeatedly deploy your solution throughout its lifecycle and have confidence your resources are deployed in a consistent state. When you create a solution from the portal, the solution automatically includes a deployment template. You do not have to create your template from scratch because you can start with the template for your solution and customize it to meet your specific needs. You can retrieve a template for an existing resource group by either exporting the current state of the resource group, or viewing the template used for a particular deployment. Viewing the exported template is a helpful way to learn about the template syntax.  In its simplest form, a template contains the following elements:  Copy\n{\n  \"$schema\": \"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n  \"contentVersion\": \"\",\n  \"parameters\": {  },\n  \"variables\": {  },\n  \"resources\": [  ],\n  \"outputs\": {  }\n}  In the  parameters element , you specify values that enable customization and flexibility in deployment.\n For example, you can pass parameter values that tailor deployment for your test environment. \n By specifying the parameters, you can use the same template to deploy your solution to different environments.  In the  variables element , you specify values that are reused throughout the template, or values\n that are constructed from other values (like parameters).  In the  resources element , you specify the components of your infrastructure. \nYou define as many resources as your solution needs.  In the  outputs element , you specify any values that are returned from the deployment \n(such as URIs from deployed resources).  Azure Resource Manager analyzes dependencies to ensure resources are created in the correct order. \nIf one resource relies on a value from another resource (such as a virtual machine needing a storage \naccount for disks), you set a dependency.  You do not have to define your entire infrastructure in a single template. Often, it makes sense to \ndivide your deployment requirements into a set of targeted, purpose-specific templates. \nYou can easily reuse these templates for different solutions. To deploy a particular solution, \nyou create a master template that links all the required templates.  You can also use the template for updates to the infrastructure. For example, you can add a resource\n to your solution and add configuration rules for the resources that are already deployed. \n If the template specifies creating a resource but that resource already exists, \n Azure Resource Manager performs an update instead of creating a new asset. Azure Resource Manager \n updates the existing asset to the same state as it would be as new.",
            "title": "Template deployment"
        },
        {
            "location": "/azure-smb-intro/",
            "text": "SMBblueprint deployment\n\u00b6\n\n\n SMB Blueprint \n also provides possibilities to deploy a set of azure resources.\n\nThe resources can be deployed using the graphical user interface or directly using PowerShell.\nThe different resources are grouped together in different templates. A mean template will then call out to those templates.\nBelow you can see how the different resources are grouped to logial components as:\n\n\n\n\nVirtual Network\n\n\nInfrastructure\n\n\nOMS\n\n\nadditional services\n\n\n\n\nfigure: SMB resource deployment template structure\n\n\n\n\nIn addition to the logical grouping a categorization needed based on the size of the company.  \n\n\nThe Azure resources deployed are categorized as 'small', 'medium' and 'large'.\n\n3 denominators targeted at  SMB clients of different sizes and needs.\n\n\nSMB categorization\n\u00b6\n\n\nThe categorization allows to differentate on the number of the resources as well on the size of those resources.\n\n\n\n\nExample: 1 or more servers in the deployment model depending on the company size\n\nExample: A Standard_DS1_v2 (basic VM) or a more powerfull VM size like Standard_DS3_V2\n\n\n\n\nThe deployment serves as a starting point and is by no means limited to the set of \nresources deployed by the SMB blueprint solution\nbelow you can find an overview of the different sizes.\n\n\ntable: categorization\n\n\n\n\n\n\n\n\nSize\n\n\n# users\n\n\n# of servers\n\n\nserver type\n\n\n\n\n\n\n\n\n\n\nSmall\n\n\n=< 5 users\n\n\n1\n\n\nStandard_DS1_v2 (1 CPU - 3.5 GB RAM)\n\n\n\n\n\n\nMedium\n\n\n=< 20 users\n\n\n1\n\n\nStandard_DS2_v2 (2 CPU - 7 GB RAM)\n\n\n\n\n\n\nLarge\n\n\n=< 50 users\n\n\n3\n\n\nStandard_DS4_v2 (8 CPU - 28 GB RAM)\n\n\n\n\n\n\n\n\nNote that there is no increase in the number of servers between a small and medium deployment.\n\n\nIn de following topics we will elaborate on the resources deployed per category.\n\nBut independend of the categorization a standard set of resources are deployed.\n\n\n\n\nFor example; a virtual machine always needs a storage account and a network card\nThe following resources will be deployed regardless of the type of deployment.\n\n\n\n\nCommon resources\n\u00b6\n\n\nNetwork resources\n\u00b6\n\n\ntable: General network resources\n\n\n\n\n\n\n\n\nResource Category\n\n\nDescription\n\n\n\n\n\n\n\n\n\n\n Network \n\n\nThe virtual network. The virtual network has a fixed ip range set to 10.3.0.0/16.\n\n\n\n\n\n\n NSG \n\n\nNetwork security groups (ACL) to protect the different subnets in the virtual network\n\n\n\n\n\n\nNetwork Card \n\n\nPer virtual machine a network card is deployed to enable communication\n\n\n\n\n\n\n public IP \n\n\na public ip address is created and assigned to each network card. A public ip enables external communications\n\n\n\n\n\n\n\n\nInfrastructure resources\n\u00b6\n\n\ntable: General infrastructure resources\n\n\n\n\n\n\n\n\nResource Category\n\n\nDescription\n\n\n\n\n\n\n\n\n\n\n storage account \n\n\na storage account per VM. the storage account will hold the vhd file(s) that hold the OS and possible extra data disks\n\n\n\n\n\n\n Primary VM \n\n\nthe virtual machine that will host the ADDS, DNS and RDS roles\n\n\n\n\n\n\n\n\nOperations Management resources\n\u00b6\n\n\ntable: General Operations management resources\n\n\n\n\n\n\n\n\nResource Category\n\n\nDescription\n\n\n\n\n\n\n\n\n\n\n OMS workspace \n\n\na storage account per VM. the storage account will hold the vhd file(s) that hold the OS and possible extra data disks\n\n\n\n\n\n\n Automation Account \n\n\nthe virtual machine that will host the ADDS, DNS and RDS roles\n\n\n\n\n\n\n\n\nSize specific resources\n\u00b6\n\n\nSmall and medium\n\u00b6\n\n\nThe small and medium deployments only differ in compute sizes and not in resources.\nThe default resources deployed are:\n\n\ntable: small and medium deployment resources\n\n\n\n\n\n\n\n\nResource Category\n\n\nDescription\n\n\n\n\n\n\n\n\n\n\n virtual machine \n\n\nThe primary virtual machine. (sra-01))\n\n\n\n\n\n\n storage account \n\n\nthe storage account containing the vm vhd's (stauniqueid)\n\n\n\n\n\n\n network card \n\n\nThe network card attached to the virtual machine (nic-sra-01)\n\n\n\n\n\n\n public ip \n\n\nthe public ip attached to the network card to enable communications (pip-sra-01)\n\n\n\n\n\n\n virtual network \n\n\nthe virtual network with a default addressprefix 10.3.0.0/16. (customername-vnet-default)\n\n\n\n\n\n\n network security group \n\n\nthe acl linked to the vnet subnet (nsg-management)\n\n\n\n\n\n\n oms workspace \n\n\nthe oms workspace (customername-oms-uniqueid)\n\n\n\n\n\n\n automation account \n\n\nthe automation account containing the sample script to start\\stop vms (customername-aa-uniqueid)\n\n\n\n\n\n\n\n\n\n\nLarge\n\u00b6\n\n\nIn a large deployment additional virtual machines are deployed to host the possible load of users connecting.\n\n\n\n\n\n\n\n\nResource Category\n\n\nDescription\n\n\n\n\n\n\n\n\n\n\n virtual machine 1\n\n\nThe primary virtual machine. (sra-01))\n\n\n\n\n\n\n storage account 1\n\n\nthe storage account containing the vm vhd's (stauniqueid)\n\n\n\n\n\n\n network card 1\n\n\nThe network card attached to the virtual machine (nic-sra-01)\n\n\n\n\n\n\n public ip 1\n\n\nthe public ip attached to the network card to enable communications (pip-sra-01)\n\n\n\n\n\n\n virtual machine 2\n\n\nThe second virtual machine. (sra-02))\n\n\n\n\n\n\n storage account 2\n\n\nthe storage account containing the vm vhd's (stauniqueid)\n\n\n\n\n\n\n network card 2\n\n\nThe network card attached to the virtual machine (nic-sra-02)\n\n\n\n\n\n\n public ip 2\n\n\nthe public ip attached to the network card to enable communications (pip-sra-02)\n\n\n\n\n\n\n virtual machine 3\n\n\nThe third virtual machine. (sra-03))\n\n\n\n\n\n\n storage account 3\n\n\nthe storage account containing the vm vhd's (stauniqueid)\n\n\n\n\n\n\n network card 3\n\n\nThe network card attached to the virtual machine (nic-sra-03)\n\n\n\n\n\n\n public ip 3\n\n\nthe public ip attached to the network card to enable communications (pip-sra-03)\n\n\n\n\n\n\n virtual machine jumpbox\n\n\na jumpbox virtual machine. (sra-jumpbox))\n\n\n\n\n\n\n storage account jumpbox\n\n\nthe storage account containing the vm vhd's (stauniqueid)\n\n\n\n\n\n\n network card jumpbox\n\n\nThe network card attached to the virtual machine (nic-sra-jumpbox)\n\n\n\n\n\n\n public ip jumpbox\n\n\nthe public ip attached to the network card to enable communications (pip-sra-jumpbox)\n\n\n\n\n\n\n virtual network \n\n\nthe virtual network with a default addressprefix 10.3.0.0/16. (customername-vnet-default)\n\n\n\n\n\n\n network security group \n\n\nthe acl linked to the vnet subnet (nsg-management)\n\n\n\n\n\n\n oms workspace \n\n\nthe oms workspace (customername-oms-uniqueid)\n\n\n\n\n\n\n automation account \n\n\nthe automation account containing the sample script to start\\stop vms (customername-aa-uniqueid)\n\n\n\n\n\n\n\n\n\n\nAdditional resources\n\u00b6\n\n\nAzure recovery services\n\u00b6\n\n\nThe foremost important additional service provides native backup capabilities.\nIf opted in for the recovery services all Virtual machines in the default deployment \nand\n any additional VM's\ndeployed using the SMBblueprint fast track solution are onboarded.\n\n\nIn addition a default policy is created and assigned to the VM's.\n\n\n\n\nVPN gateway\n\u00b6\n\n\nIf a hybrid scenario is needed (onpremise and Azure resources connected) a VPN connection needs to be established.\n\nThe VPN will be deployed in a reserved subnet. The reserverd subnet is named Gateway subnet.\n\nThe default delpoyment already foresees the subnet and provides an ip range.\n\n\nA VPN gateway exists in different SKU's, but only the sku's below are deployed using the SMBblueprint solution\n\n\n\n\ntable: Additional virtual machine deployment options\n\n\n\n\n\n\n\n\ndeployment option\n\n\ncharacteristics\n\n\n\n\n\n\n\n\n\n\nnone\n\n\nN/A\n\n\n\n\n\n\nbasic\n\n\nBasic edition (100 Mbps)\n\n\n\n\n\n\n\n\n\n\nAfter delpoyment additional configuration is needed\n\n\n\n\nLocal networks and establishing the VPN connection is a manuel configuration after deployment.\n\nA guide on the configuration can be found on the \nMicrosoft Azure documentation center\n\n\nNote:\n A VPN gateway deployment takes around 45min.\n\n\nAdditional virtual machine\n\u00b6\n\n\nIn addition to the default infrastructure being deployed you also have the option to deploy an additional\nvirtual machine.\n\nThis enables organizations to deviate from the deployment characteristics determined by the size of the company.\n\n\nIf you opted in on Azure recovery services to provide backup capabilities the virtual machine will also be \nonboarded.\n\n\n\n\ntable: Additional virtual machine deployment options\n\n\n\n\n\n\n\n\ndeployment option\n\n\ncharacteristics\n\n\n\n\n\n\n\n\n\n\nnone\n\n\nN/A\n\n\n\n\n\n\nsmall\n\n\nStandard_DS1_v2 (1 CPU - 3.5 GB RAM)\n\n\n\n\n\n\nmedium\n\n\nStandard_DS2_v2 (2 CPU - 7 GB RAM)\n\n\n\n\n\n\n\n\nAzure SQL database\n\u00b6\n\n\nThe deployment foresees the possibility to depoy an Azure SQL database in addition of the default infrastructure deployment.\n\n\n\n\ntable: Azure SQL deployment options\n\n\n\n\n\n\n\n\ndeployment option\n\n\ncharacteristics\n\n\n\n\n\n\n\n\n\n\nnone\n\n\nN/A\n\n\n\n\n\n\nsmall\n\n\nBasic edition",
            "title": "SMBblueprint overview"
        },
        {
            "location": "/azure-smb-intro/#smbblueprint-deployment",
            "text": "SMB Blueprint   also provides possibilities to deploy a set of azure resources. \nThe resources can be deployed using the graphical user interface or directly using PowerShell.\nThe different resources are grouped together in different templates. A mean template will then call out to those templates.\nBelow you can see how the different resources are grouped to logial components as:   Virtual Network  Infrastructure  OMS  additional services   figure: SMB resource deployment template structure   In addition to the logical grouping a categorization needed based on the size of the company.    The Azure resources deployed are categorized as 'small', 'medium' and 'large'. \n3 denominators targeted at  SMB clients of different sizes and needs.",
            "title": "SMBblueprint deployment"
        },
        {
            "location": "/azure-smb-intro/#smb-categorization",
            "text": "The categorization allows to differentate on the number of the resources as well on the size of those resources.   Example: 1 or more servers in the deployment model depending on the company size \nExample: A Standard_DS1_v2 (basic VM) or a more powerfull VM size like Standard_DS3_V2   The deployment serves as a starting point and is by no means limited to the set of \nresources deployed by the SMB blueprint solution\nbelow you can find an overview of the different sizes.  table: categorization     Size  # users  # of servers  server type      Small  =< 5 users  1  Standard_DS1_v2 (1 CPU - 3.5 GB RAM)    Medium  =< 20 users  1  Standard_DS2_v2 (2 CPU - 7 GB RAM)    Large  =< 50 users  3  Standard_DS4_v2 (8 CPU - 28 GB RAM)     Note that there is no increase in the number of servers between a small and medium deployment.  In de following topics we will elaborate on the resources deployed per category. \nBut independend of the categorization a standard set of resources are deployed.   For example; a virtual machine always needs a storage account and a network card\nThe following resources will be deployed regardless of the type of deployment.",
            "title": "SMB categorization"
        },
        {
            "location": "/azure-smb-intro/#common-resources",
            "text": "",
            "title": "Common resources"
        },
        {
            "location": "/azure-smb-intro/#network-resources",
            "text": "table: General network resources     Resource Category  Description       Network   The virtual network. The virtual network has a fixed ip range set to 10.3.0.0/16.     NSG   Network security groups (ACL) to protect the different subnets in the virtual network    Network Card   Per virtual machine a network card is deployed to enable communication     public IP   a public ip address is created and assigned to each network card. A public ip enables external communications",
            "title": "Network resources"
        },
        {
            "location": "/azure-smb-intro/#infrastructure-resources",
            "text": "table: General infrastructure resources     Resource Category  Description       storage account   a storage account per VM. the storage account will hold the vhd file(s) that hold the OS and possible extra data disks     Primary VM   the virtual machine that will host the ADDS, DNS and RDS roles",
            "title": "Infrastructure resources"
        },
        {
            "location": "/azure-smb-intro/#operations-management-resources",
            "text": "table: General Operations management resources     Resource Category  Description       OMS workspace   a storage account per VM. the storage account will hold the vhd file(s) that hold the OS and possible extra data disks     Automation Account   the virtual machine that will host the ADDS, DNS and RDS roles",
            "title": "Operations Management resources"
        },
        {
            "location": "/azure-smb-intro/#size-specific-resources",
            "text": "",
            "title": "Size specific resources"
        },
        {
            "location": "/azure-smb-intro/#small-and-medium",
            "text": "The small and medium deployments only differ in compute sizes and not in resources.\nThe default resources deployed are:  table: small and medium deployment resources     Resource Category  Description       virtual machine   The primary virtual machine. (sra-01))     storage account   the storage account containing the vm vhd's (stauniqueid)     network card   The network card attached to the virtual machine (nic-sra-01)     public ip   the public ip attached to the network card to enable communications (pip-sra-01)     virtual network   the virtual network with a default addressprefix 10.3.0.0/16. (customername-vnet-default)     network security group   the acl linked to the vnet subnet (nsg-management)     oms workspace   the oms workspace (customername-oms-uniqueid)     automation account   the automation account containing the sample script to start\\stop vms (customername-aa-uniqueid)",
            "title": "Small and medium"
        },
        {
            "location": "/azure-smb-intro/#large",
            "text": "In a large deployment additional virtual machines are deployed to host the possible load of users connecting.     Resource Category  Description       virtual machine 1  The primary virtual machine. (sra-01))     storage account 1  the storage account containing the vm vhd's (stauniqueid)     network card 1  The network card attached to the virtual machine (nic-sra-01)     public ip 1  the public ip attached to the network card to enable communications (pip-sra-01)     virtual machine 2  The second virtual machine. (sra-02))     storage account 2  the storage account containing the vm vhd's (stauniqueid)     network card 2  The network card attached to the virtual machine (nic-sra-02)     public ip 2  the public ip attached to the network card to enable communications (pip-sra-02)     virtual machine 3  The third virtual machine. (sra-03))     storage account 3  the storage account containing the vm vhd's (stauniqueid)     network card 3  The network card attached to the virtual machine (nic-sra-03)     public ip 3  the public ip attached to the network card to enable communications (pip-sra-03)     virtual machine jumpbox  a jumpbox virtual machine. (sra-jumpbox))     storage account jumpbox  the storage account containing the vm vhd's (stauniqueid)     network card jumpbox  The network card attached to the virtual machine (nic-sra-jumpbox)     public ip jumpbox  the public ip attached to the network card to enable communications (pip-sra-jumpbox)     virtual network   the virtual network with a default addressprefix 10.3.0.0/16. (customername-vnet-default)     network security group   the acl linked to the vnet subnet (nsg-management)     oms workspace   the oms workspace (customername-oms-uniqueid)     automation account   the automation account containing the sample script to start\\stop vms (customername-aa-uniqueid)",
            "title": "Large"
        },
        {
            "location": "/azure-smb-intro/#additional-resources",
            "text": "",
            "title": "Additional resources"
        },
        {
            "location": "/azure-smb-intro/#azure-recovery-services",
            "text": "The foremost important additional service provides native backup capabilities.\nIf opted in for the recovery services all Virtual machines in the default deployment  and  any additional VM's\ndeployed using the SMBblueprint fast track solution are onboarded.  In addition a default policy is created and assigned to the VM's.",
            "title": "Azure recovery services"
        },
        {
            "location": "/azure-smb-intro/#vpn-gateway",
            "text": "If a hybrid scenario is needed (onpremise and Azure resources connected) a VPN connection needs to be established. \nThe VPN will be deployed in a reserved subnet. The reserverd subnet is named Gateway subnet. \nThe default delpoyment already foresees the subnet and provides an ip range.  A VPN gateway exists in different SKU's, but only the sku's below are deployed using the SMBblueprint solution   table: Additional virtual machine deployment options     deployment option  characteristics      none  N/A    basic  Basic edition (100 Mbps)      After delpoyment additional configuration is needed   Local networks and establishing the VPN connection is a manuel configuration after deployment. \nA guide on the configuration can be found on the  Microsoft Azure documentation center  Note:  A VPN gateway deployment takes around 45min.",
            "title": "VPN gateway"
        },
        {
            "location": "/azure-smb-intro/#additional-virtual-machine",
            "text": "In addition to the default infrastructure being deployed you also have the option to deploy an additional\nvirtual machine. \nThis enables organizations to deviate from the deployment characteristics determined by the size of the company.  If you opted in on Azure recovery services to provide backup capabilities the virtual machine will also be \nonboarded.   table: Additional virtual machine deployment options     deployment option  characteristics      none  N/A    small  Standard_DS1_v2 (1 CPU - 3.5 GB RAM)    medium  Standard_DS2_v2 (2 CPU - 7 GB RAM)",
            "title": "Additional virtual machine"
        },
        {
            "location": "/azure-smb-intro/#azure-sql-database",
            "text": "The deployment foresees the possibility to depoy an Azure SQL database in addition of the default infrastructure deployment.   table: Azure SQL deployment options     deployment option  characteristics      none  N/A    small  Basic edition",
            "title": "Azure SQL database"
        },
        {
            "location": "/azure-arm-deployment/",
            "text": "Overview\n\u00b6\n\n\nThe solution we deploy consists of several components.\n\n\n\n\nA virtual network\n\n\nVirtual machines, storage, etc\n\n\nOperations Management Suite (Free)\n\n\noptional recovery services (backup)\n\n\noptional additional Virtual machines\n\n\noptional Azure SQL\n\n\n\n\n\n\nBelow you can find the detail per resource we deploy\n\n\n Azure deploy\n\u00b6\n\n\nThe azuredeploy.json is the entry point of the azure deployment. It really serves as the orchestration \nfile to call out to other deployments or resources.\n\nSingle instance resources will be deployed if defined as optional.\n\n\nIn the following topics we will elaborate on the different deployments or resources.\nWith a limited set of parameters we are able to rollout a full infrastructure.\nGiven the options we could identify 3 distinct deployment models\n\n\n\n\nSmall\n\n\nMedium\n\n\nLarge\n\n\n\n\nLet's dive into the different models\n\n\nSmall\n\u00b6\n\n\nThe small deployment comes down to the deployment of 1 virtual machine.\n\n\nan overview of the resources deployed\n\n\n![Azure Portal small overview]( \"Azure Portal small overview\")\n\n\nThe following resources are deployed:\n\n\n\n\nNetwork\n\n\na virtual network with different subnets to support future growth\n\n\nnetwork security groups bound to the subnets to provide security\n\n\n\n\n\n\nInfrastructure\n\n\na storage account to host the disks for our virtual machine\n\n\na virtual machine of type DS2_V2\n\n\na network card to provide network connectivity\n\n\n\n\n\n\nOperations Management Suite\n\n\nOMS Workspace\n\n\nAzure Automation account\n\n\n\n\n\n\n\n\nIn addition the following resources can optionally be deployed:\n\n\n\n\nbackup services\n\n\na gateway to support onprem connectivity\n\n\nan Azure SQL server and database\n\n\nan additional Virtual machine\n\n\nstorage account\n\n\nvirtual machine\n\n\nnetwork card\n\n\n\n\n\n\n\n\nMedium\n\u00b6\n\n\nThe medium deployment does not differ from the small deployment except from the virtual machine sizing.\n\n\nInstead of a DS2_V2 a DS3_V2 is used instead for better performance\n\n\nan overview of the resources deployed\n\n\n\n\nFor more information see \nSmall deployment\n\n\nLarge\n\u00b6\n\n\nThe small deployment comes down to the deployment of 1 virtual machine.\n\n\nan overview of the resources deployed\n\n\n\n\nThe following resources are deployed:\n\n\n\n\nNetwork\n\n\na virtual network with different subnets to support future growth\n\n\nnetwork security groups bound to the subnets to provide security\n\n\n\n\n\n\nInfrastructure\n\n\na storage account to host the disks for our virtual machine\n\n\na virtual machine of type DS2_V2\n\n\na network card to provide network connectivity\n\n\n\n\n\n\nOperations Management Suite\n\n\nOMS Workspace\n\n\nAzure Automation account\n\n\n\n\n\n\n\n\nIn addition the following resources can optionally be deployed:\n\n\n\n\nbackup services\n\n\na gateway to support onprem connectivity\n\n\nan Azure SQL server and database\n\n\nan additional Virtual machine\n\n\nstorage account\n\n\nvirtual machine\n\n\nnetwork card\n\n\n\n\n\n\n\n\n Network deployment\n\u00b6\n\n\nFrom within the \nazuredeploy.json\n the network resources are deployed using a \ngeneric\n deployment resource.\nThe deployment resource references an ARM template (public available) containing the network resources.\n\n\nAs the picture below visualizes, the network ARM template contains several resources;\n\n\n\n\nthe virtual network\n\n\nthe network security groups\n\n\n\n\nfigure: Network deployment overview\n\nNetwork deployment overview\n\n\nVirtual network\n\u00b6\n\n\nThe ip range for the virtual network is captured in a variable and will be the same for every deployment.\nThe table below provides an overview of the ip ranges per subnet.\nBy default the management and gateway subnet are deployed, other subnets are deployed depending on the size of customer.\n\n\ntable: subnet overview\n\n\n\n\n\n\n\n\nSubnet\n\n\nSubnet name\n\n\nIP range\n\n\n\n\n\n\n\n\n\n\nmanagement\n\n\nsn-managementServices\n\n\n10.3.1.0/24\n\n\n\n\n\n\ngateway\n\n\nGatewaySubnet\n\n\n10.3.5.0/24\n\n\n\n\n\n\nDMZ *\n\n\nsn-dmzServices\n\n\n10.3.2.0/24\n\n\n\n\n\n\nEmergency *\n\n\nsn-emergencyServices\n\n\n10.3.4.0/24\n\n\n\n\n\n\n\n\n*depends on the customer size choosen during deployment\n\n\nNetwork security groups\n\u00b6\n\n\n\nNetwork security group (NSG) contains a list of Access Control List (ACL) rules that allow or deny \nnetwork traffic to your VM instances in a Virtual Network. NSGs can be associated with either subnets \nor individual VM instances within that subnet. When a NSG is associated with a subnet, the ACL rules \napply to all the VM instances in that subnet. In addition, traffic to an individual VM can be \nrestricted further by associating a NSG directly to that VM.\n\n\nLet's have a look at the different network security groups used in the solution.\n\n\nmanagement NSG\n\u00b6\n\n\nThe management network security group is deployed and linked to the corresponsong sn-managementServices\nsubnet as part of the virtual network.\nThe managementServices subnet hosts all 'management' services like for example domain controllers,\nfile servers, etc.\n\n\n\n\nDepending on customer size, different rules are deployed.\n\n\n\n\nsmall and medium\n\u00b6\n\n\ntable: small and medium size rules overview\n\n\n\n\n\n\n\n\n#\n\n\nRule name\n\n\nprotocol\n\n\nsource range\n\n\nsource port\n\n\ndestination range\n\n\ndestination port\n\n\naccess\n\n\ndirection\n\n\n\n\n\n\n\n\n\n\n1\n\n\ninternet-rds-in-allow *\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n3389\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n2\n\n\ninternet-pshttps-in-allow  *\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n5986\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n3\n\n\nemergency-rds-in-allow *\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n3389\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n4\n\n\nemergency-pshttps-in-allow  *\n\n\ntcp\n\n\n10.\n\n\n*\n\n\n*\n\n\n5986\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n\n\nlarge\n\u00b6\n\n\ntable: large size rules overview\n\n\n\n\n\n\n\n\n#\n\n\nRule name\n\n\nprotocol\n\n\nsource range\n\n\nsource port\n\n\ndestination range\n\n\ndestination port\n\n\naccess\n\n\ndirection\n\n\n\n\n\n\n\n\n\n\n1\n\n\ninternet-rds-in-allow *\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n3389\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n2\n\n\ninternet-pshttps-in-allow  *\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n5986\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n3\n\n\nemergency-rds-in-allow *\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n3389\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n4\n\n\nemergency-pshttps-in-allow  *\n\n\ntcp\n\n\n10.\n\n\n*\n\n\n*\n\n\n5986\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n\n\nDMZ NSG (large)\n\u00b6\n\n\nThe DMZ network security group is deployed and linked to the corresponsong sn-dmzServices\nsubnet as part of the virtual network.\nThe dmz services network security group contains the following rules:\n\n\ntable: large size rules overview\n\n\n\n\n\n\n\n\n#\n\n\nRule name\n\n\nprotocol\n\n\nsource range\n\n\nsource port\n\n\ndestination range\n\n\ndestination port\n\n\naccess\n\n\ndirection\n\n\n\n\n\n\n\n\n\n\n1\n\n\ninternet-rds-in-allow *\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n3389\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n2\n\n\ninternet-pshttps-in-allow  *\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n5986\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n3\n\n\nemergency-rds-in-allow *\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n3389\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n4\n\n\nemergency-pshttps-in-allow  *\n\n\ntcp\n\n\n10.\n\n\n*\n\n\n*\n\n\n5986\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n\n\nEmergency NSG (large)\n\u00b6\n\n\nThe emergency network security group is deployed and linked to the corresponsong sn-EmergencyServices\nsubnet as part of the virtual network.\nThe emergency services network security group contains the following rules:\n\n\ntable: rules overview\n\n\n\n\n\n\n\n\n#\n\n\nRule name\n\n\nprotocol\n\n\nsource range\n\n\nsource port\n\n\ndestination range\n\n\ndestination port\n\n\naccess\n\n\ndirection\n\n\n\n\n\n\n\n\n\n\n1\n\n\ninternet-rds-in-allow\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n3389\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n2\n\n\ninternet-pshttps-in-allow\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n5986\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n\n\nFiles\n\u00b6\n\n\nFiles used in the deployment (depending on provided selection): \n\n\ntable: network templates overview\n\n\n\n\n\n\n\n\n#\n\n\nFilename\n\n\n\n\n\n\n\n\n\n\n1\n\n\nnetwork-small.json\n\n\n\n\n\n\n2\n\n\nnetwork-medium.json\n\n\n\n\n\n\n3\n\n\nnetwork-large.json\n\n\n\n\n\n\n\n\noptional parameter files are provided as well:\n\n\ntable: parameter files\n\n\n\n\n\n\n\n\n#\n\n\nFilename\n\n\n\n\n\n\n\n\n\n\n1\n\n\nnetwork-small.parameters.json\n\n\n\n\n\n\n2\n\n\nnetwork-medium.parameters.json\n\n\n\n\n\n\n3\n\n\nnetwork-large.parameters.json\n\n\n\n\n\n\n\n\nInfrastructure deployment\n\u00b6\n\n\nthe infrastructure deployment template contains all resources to support to basic deployment once a network is provisioned.\nThe resources deployed vary depending on the deployment size choosen.\nBelow you can find an overview of the resources, their function and the files.\n\n\nCommon resources (small\\medium\\large)\n\u00b6\n\n\nVirtual machine\n\u00b6\n\n\nAs the Azure resource manager templates used are idempodent, the technology used to configure the virtual machines\nis idempodent as well. PowerShell DSC provides such a mechanism.\n\nThe virtual machine resoource supports several extension such as:\n\n\n\n\nPowerShell DSC\n\n\nOMS Agent\n\n\nRecovery services onboarding\n\n\n...\n\n\n\n\ntable: rules overview\n\n\n\n\n\n\n\n\n#\n\n\nRule name\n\n\nprotocol\n\n\nsource range\n\n\nsource port\n\n\ndestination range\n\n\ndestination port\n\n\naccess\n\n\ndirection\n\n\n\n\n\n\n\n\n\n\n1\n\n\ninternet-rds-in-allow\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n3389\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n2\n\n\ninternet-pshttps-in-allow\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n5986\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n\n\nnetwork card\n\u00b6\n\n\ntable: rules overview\n\n\n\n\n\n\n\n\n#\n\n\nRule name\n\n\nprotocol\n\n\nsource range\n\n\nsource port\n\n\ndestination range\n\n\ndestination port\n\n\naccess\n\n\ndirection\n\n\n\n\n\n\n\n\n\n\n1\n\n\ninternet-rds-in-allow\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n3389\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n2\n\n\ninternet-pshttps-in-allow\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n5986\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n#### public ip\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntable: rules overview\n\n\n\n\n\n\n\n\n#\n\n\nRule name\n\n\nprotocol\n\n\nsource range\n\n\nsource port\n\n\ndestination range\n\n\ndestination port\n\n\naccess\n\n\ndirection\n\n\n\n\n\n\n\n\n\n\n1\n\n\ninternet-rds-in-allow\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n3389\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n2\n\n\ninternet-pshttps-in-allow\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n5986\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n#### storage account\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntable: rules overview\n\n\n\n\n\n\n\n\n#\n\n\nRule name\n\n\nprotocol\n\n\nsource range\n\n\nsource port\n\n\ndestination range\n\n\ndestination port\n\n\naccess\n\n\ndirection\n\n\n\n\n\n\n\n\n\n\n1\n\n\ninternet-rds-in-allow\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n3389\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n2\n\n\ninternet-pshttps-in-allow\n\n\ntcp\n\n\ninternet\n\n\n*\n\n\n*\n\n\n5986\n\n\nallow\n\n\ninbound\n\n\n\n\n\n\n\n\nlarge deployment\n\u00b6\n\n\nTwo additional virtual machines are provisioned with the same characteristics as the common 'primary'\nvirtual machines except for:\n\n\n\n\nvm roles\n\n\nno domain services roles\n\n\nRDS session host\n\n\n\n\n\n\n\n\nFiles\n\u00b6\n\n\nFiles used in the deployment of additional services\n\n\ntable: additional services templates overview\n\n\n\n\n\n\n\n\n#\n\n\nFilename\n\n\n\n\n\n\n\n\n\n\n1\n\n\ninfrastructure-small.json\n\n\n\n\n\n\n2\n\n\ninfrastructure-medium.json\n\n\n\n\n\n\n3\n\n\ninfrastructure-large.json\n\n\n\n\n\n\n\n\noptional parameter files are provided as well:\n\n\ntable: parameter files\n\n\n\n\n\n\n\n\n#\n\n\nFilename\n\n\n\n\n\n\n\n\n\n\n1\n\n\ninfrastructure-small.parameters.json\n\n\n\n\n\n\n2\n\n\ninfrastructure-medium.parameters.json\n\n\n\n\n\n\n3\n\n\ninfrastructure-large.parameters.json\n\n\n\n\n\n\n\n\nOMS Workspace deployment\n\u00b6\n\n\nSolutions\n\u00b6\n\n\nSoftware updates\n\u00b6\n\n\n\n\nSecurity and Compliance\n\u00b6\n\n\nPrevent, detect, and respond to threats with increased visibility. \n\n\nTake control of cloud security by defining policies that recommend and monitor security configurations. \nLeverage Microsoft security data and analysis to perform more intelligent and effective threat detection.\n\n\n\nChange tracking\n\u00b6\n\n\n\n\nAgent Heatlh\n\u00b6\n\n\n\n\nSaved searches\n\u00b6\n\n\nSaved searches help in identifying potential issues.\n\n\nquery 1\n\u00b6\n\n\nOMS Azure Automation deployment\n\u00b6\n\n\nAdditional services\n\u00b6\n\n\nAdditional VM\n\u00b6\n\n\nrecovery services (backup)\n\u00b6\n\n\nVPN gateway\n\u00b6\n\n\nAzure SQL database\n\u00b6\n\n\nFiles\n\u00b6\n\n\nFiles used in the deployment of additional services\n\n\ntable: additional services templates overview\n\n\n\n\n\n\n\n\n#\n\n\nFilename\n\n\n\n\n\n\n\n\n\n\n1\n\n\nvm-additional.json\n\n\n\n\n\n\n2\n\n\nrecoveryservicesvault.json\n\n\n\n\n\n\n3\n\n\nrecoveryservicesvault-none.json\n\n\n\n\n\n\n4\n\n\ngateway.json\n\n\n\n\n\n\n5\n\n\ngateway-none.json\n\n\n\n\n\n\n6\n\n\nsql-azure.json\n\n\n\n\n\n\n7\n\n\nsql-none.json\n\n\n\n\n\n\n\n\noptional parameter files are provided as well:\n\n\ntable: parameter files\n\n\n\n\n\n\n\n\n#\n\n\nFilename\n\n\n\n\n\n\n\n\n\n\n1\n\n\nvm-additional.parameters.json\n\n\n\n\n\n\n2\n\n\nrecoveryservicesvault.parameters.json\n\n\n\n\n\n\n3\n\n\ngateway.parameters.json\n\n\n\n\n\n\n4\n\n\nsql-azure.parameters.json",
            "title": "SMBblueprint deployment"
        },
        {
            "location": "/azure-arm-deployment/#overview",
            "text": "The solution we deploy consists of several components.   A virtual network  Virtual machines, storage, etc  Operations Management Suite (Free)  optional recovery services (backup)  optional additional Virtual machines  optional Azure SQL    Below you can find the detail per resource we deploy",
            "title": "Overview"
        },
        {
            "location": "/azure-arm-deployment/#azure-deploy",
            "text": "The azuredeploy.json is the entry point of the azure deployment. It really serves as the orchestration \nfile to call out to other deployments or resources. \nSingle instance resources will be deployed if defined as optional. \nIn the following topics we will elaborate on the different deployments or resources.\nWith a limited set of parameters we are able to rollout a full infrastructure.\nGiven the options we could identify 3 distinct deployment models   Small  Medium  Large   Let's dive into the different models",
            "title": "Azure deploy"
        },
        {
            "location": "/azure-arm-deployment/#small",
            "text": "The small deployment comes down to the deployment of 1 virtual machine.  an overview of the resources deployed  ![Azure Portal small overview]( \"Azure Portal small overview\")  The following resources are deployed:   Network  a virtual network with different subnets to support future growth  network security groups bound to the subnets to provide security    Infrastructure  a storage account to host the disks for our virtual machine  a virtual machine of type DS2_V2  a network card to provide network connectivity    Operations Management Suite  OMS Workspace  Azure Automation account     In addition the following resources can optionally be deployed:   backup services  a gateway to support onprem connectivity  an Azure SQL server and database  an additional Virtual machine  storage account  virtual machine  network card",
            "title": "Small"
        },
        {
            "location": "/azure-arm-deployment/#medium",
            "text": "The medium deployment does not differ from the small deployment except from the virtual machine sizing.  Instead of a DS2_V2 a DS3_V2 is used instead for better performance  an overview of the resources deployed   For more information see  Small deployment",
            "title": "Medium"
        },
        {
            "location": "/azure-arm-deployment/#large",
            "text": "The small deployment comes down to the deployment of 1 virtual machine.  an overview of the resources deployed   The following resources are deployed:   Network  a virtual network with different subnets to support future growth  network security groups bound to the subnets to provide security    Infrastructure  a storage account to host the disks for our virtual machine  a virtual machine of type DS2_V2  a network card to provide network connectivity    Operations Management Suite  OMS Workspace  Azure Automation account     In addition the following resources can optionally be deployed:   backup services  a gateway to support onprem connectivity  an Azure SQL server and database  an additional Virtual machine  storage account  virtual machine  network card",
            "title": "Large"
        },
        {
            "location": "/azure-arm-deployment/#network-deployment",
            "text": "From within the  azuredeploy.json  the network resources are deployed using a  generic  deployment resource.\nThe deployment resource references an ARM template (public available) containing the network resources.  As the picture below visualizes, the network ARM template contains several resources;   the virtual network  the network security groups   figure: Network deployment overview \nNetwork deployment overview",
            "title": "Network deployment"
        },
        {
            "location": "/azure-arm-deployment/#virtual-network",
            "text": "The ip range for the virtual network is captured in a variable and will be the same for every deployment.\nThe table below provides an overview of the ip ranges per subnet.\nBy default the management and gateway subnet are deployed, other subnets are deployed depending on the size of customer.  table: subnet overview     Subnet  Subnet name  IP range      management  sn-managementServices  10.3.1.0/24    gateway  GatewaySubnet  10.3.5.0/24    DMZ *  sn-dmzServices  10.3.2.0/24    Emergency *  sn-emergencyServices  10.3.4.0/24     *depends on the customer size choosen during deployment",
            "title": "Virtual network"
        },
        {
            "location": "/azure-arm-deployment/#network-security-groups",
            "text": "Network security group (NSG) contains a list of Access Control List (ACL) rules that allow or deny \nnetwork traffic to your VM instances in a Virtual Network. NSGs can be associated with either subnets \nor individual VM instances within that subnet. When a NSG is associated with a subnet, the ACL rules \napply to all the VM instances in that subnet. In addition, traffic to an individual VM can be \nrestricted further by associating a NSG directly to that VM.  Let's have a look at the different network security groups used in the solution.",
            "title": "Network security groups"
        },
        {
            "location": "/azure-arm-deployment/#management-nsg",
            "text": "The management network security group is deployed and linked to the corresponsong sn-managementServices\nsubnet as part of the virtual network.\nThe managementServices subnet hosts all 'management' services like for example domain controllers,\nfile servers, etc.   Depending on customer size, different rules are deployed.",
            "title": "management NSG"
        },
        {
            "location": "/azure-arm-deployment/#small-and-medium",
            "text": "table: small and medium size rules overview     #  Rule name  protocol  source range  source port  destination range  destination port  access  direction      1  internet-rds-in-allow *  tcp  internet  *  *  3389  allow  inbound    2  internet-pshttps-in-allow  *  tcp  internet  *  *  5986  allow  inbound    3  emergency-rds-in-allow *  tcp  internet  *  *  3389  allow  inbound    4  emergency-pshttps-in-allow  *  tcp  10.  *  *  5986  allow  inbound",
            "title": "small and medium"
        },
        {
            "location": "/azure-arm-deployment/#large_1",
            "text": "table: large size rules overview     #  Rule name  protocol  source range  source port  destination range  destination port  access  direction      1  internet-rds-in-allow *  tcp  internet  *  *  3389  allow  inbound    2  internet-pshttps-in-allow  *  tcp  internet  *  *  5986  allow  inbound    3  emergency-rds-in-allow *  tcp  internet  *  *  3389  allow  inbound    4  emergency-pshttps-in-allow  *  tcp  10.  *  *  5986  allow  inbound",
            "title": "large"
        },
        {
            "location": "/azure-arm-deployment/#dmz-nsg-large",
            "text": "The DMZ network security group is deployed and linked to the corresponsong sn-dmzServices\nsubnet as part of the virtual network.\nThe dmz services network security group contains the following rules:  table: large size rules overview     #  Rule name  protocol  source range  source port  destination range  destination port  access  direction      1  internet-rds-in-allow *  tcp  internet  *  *  3389  allow  inbound    2  internet-pshttps-in-allow  *  tcp  internet  *  *  5986  allow  inbound    3  emergency-rds-in-allow *  tcp  internet  *  *  3389  allow  inbound    4  emergency-pshttps-in-allow  *  tcp  10.  *  *  5986  allow  inbound",
            "title": "DMZ NSG (large)"
        },
        {
            "location": "/azure-arm-deployment/#emergency-nsg-large",
            "text": "The emergency network security group is deployed and linked to the corresponsong sn-EmergencyServices\nsubnet as part of the virtual network.\nThe emergency services network security group contains the following rules:  table: rules overview     #  Rule name  protocol  source range  source port  destination range  destination port  access  direction      1  internet-rds-in-allow  tcp  internet  *  *  3389  allow  inbound    2  internet-pshttps-in-allow  tcp  internet  *  *  5986  allow  inbound",
            "title": "Emergency NSG (large)"
        },
        {
            "location": "/azure-arm-deployment/#files",
            "text": "Files used in the deployment (depending on provided selection):   table: network templates overview     #  Filename      1  network-small.json    2  network-medium.json    3  network-large.json     optional parameter files are provided as well:  table: parameter files     #  Filename      1  network-small.parameters.json    2  network-medium.parameters.json    3  network-large.parameters.json",
            "title": "Files"
        },
        {
            "location": "/azure-arm-deployment/#infrastructure-deployment",
            "text": "the infrastructure deployment template contains all resources to support to basic deployment once a network is provisioned.\nThe resources deployed vary depending on the deployment size choosen.\nBelow you can find an overview of the resources, their function and the files.",
            "title": "Infrastructure deployment"
        },
        {
            "location": "/azure-arm-deployment/#common-resources-smallmediumlarge",
            "text": "",
            "title": "Common resources (small\\medium\\large)"
        },
        {
            "location": "/azure-arm-deployment/#virtual-machine",
            "text": "As the Azure resource manager templates used are idempodent, the technology used to configure the virtual machines\nis idempodent as well. PowerShell DSC provides such a mechanism. \nThe virtual machine resoource supports several extension such as:   PowerShell DSC  OMS Agent  Recovery services onboarding  ...   table: rules overview     #  Rule name  protocol  source range  source port  destination range  destination port  access  direction      1  internet-rds-in-allow  tcp  internet  *  *  3389  allow  inbound    2  internet-pshttps-in-allow  tcp  internet  *  *  5986  allow  inbound",
            "title": "Virtual machine"
        },
        {
            "location": "/azure-arm-deployment/#network-card",
            "text": "table: rules overview     #  Rule name  protocol  source range  source port  destination range  destination port  access  direction      1  internet-rds-in-allow  tcp  internet  *  *  3389  allow  inbound    2  internet-pshttps-in-allow  tcp  internet  *  *  5986  allow  inbound    #### public ip             table: rules overview     #  Rule name  protocol  source range  source port  destination range  destination port  access  direction      1  internet-rds-in-allow  tcp  internet  *  *  3389  allow  inbound    2  internet-pshttps-in-allow  tcp  internet  *  *  5986  allow  inbound    #### storage account             table: rules overview     #  Rule name  protocol  source range  source port  destination range  destination port  access  direction      1  internet-rds-in-allow  tcp  internet  *  *  3389  allow  inbound    2  internet-pshttps-in-allow  tcp  internet  *  *  5986  allow  inbound",
            "title": "network card"
        },
        {
            "location": "/azure-arm-deployment/#large-deployment",
            "text": "Two additional virtual machines are provisioned with the same characteristics as the common 'primary'\nvirtual machines except for:   vm roles  no domain services roles  RDS session host",
            "title": "large deployment"
        },
        {
            "location": "/azure-arm-deployment/#files_1",
            "text": "Files used in the deployment of additional services  table: additional services templates overview     #  Filename      1  infrastructure-small.json    2  infrastructure-medium.json    3  infrastructure-large.json     optional parameter files are provided as well:  table: parameter files     #  Filename      1  infrastructure-small.parameters.json    2  infrastructure-medium.parameters.json    3  infrastructure-large.parameters.json",
            "title": "Files"
        },
        {
            "location": "/azure-arm-deployment/#oms-workspace-deployment",
            "text": "",
            "title": "OMS Workspace deployment"
        },
        {
            "location": "/azure-arm-deployment/#solutions",
            "text": "",
            "title": "Solutions"
        },
        {
            "location": "/azure-arm-deployment/#software-updates",
            "text": "",
            "title": "Software updates"
        },
        {
            "location": "/azure-arm-deployment/#security-and-compliance",
            "text": "Prevent, detect, and respond to threats with increased visibility.   Take control of cloud security by defining policies that recommend and monitor security configurations. \nLeverage Microsoft security data and analysis to perform more intelligent and effective threat detection.",
            "title": "Security and Compliance"
        },
        {
            "location": "/azure-arm-deployment/#change-tracking",
            "text": "",
            "title": "Change tracking"
        },
        {
            "location": "/azure-arm-deployment/#agent-heatlh",
            "text": "",
            "title": "Agent Heatlh"
        },
        {
            "location": "/azure-arm-deployment/#saved-searches",
            "text": "Saved searches help in identifying potential issues.",
            "title": "Saved searches"
        },
        {
            "location": "/azure-arm-deployment/#query-1",
            "text": "",
            "title": "query 1"
        },
        {
            "location": "/azure-arm-deployment/#oms-azure-automation-deployment",
            "text": "",
            "title": "OMS Azure Automation deployment"
        },
        {
            "location": "/azure-arm-deployment/#additional-services",
            "text": "",
            "title": "Additional services"
        },
        {
            "location": "/azure-arm-deployment/#additional-vm",
            "text": "",
            "title": "Additional VM"
        },
        {
            "location": "/azure-arm-deployment/#recovery-services-backup",
            "text": "",
            "title": "recovery services (backup)"
        },
        {
            "location": "/azure-arm-deployment/#vpn-gateway",
            "text": "",
            "title": "VPN gateway"
        },
        {
            "location": "/azure-arm-deployment/#azure-sql-database",
            "text": "",
            "title": "Azure SQL database"
        },
        {
            "location": "/azure-arm-deployment/#files_2",
            "text": "Files used in the deployment of additional services  table: additional services templates overview     #  Filename      1  vm-additional.json    2  recoveryservicesvault.json    3  recoveryservicesvault-none.json    4  gateway.json    5  gateway-none.json    6  sql-azure.json    7  sql-none.json     optional parameter files are provided as well:  table: parameter files     #  Filename      1  vm-additional.parameters.json    2  recoveryservicesvault.parameters.json    3  gateway.parameters.json    4  sql-azure.parameters.json",
            "title": "Files"
        },
        {
            "location": "/about/",
            "text": "About SMBblueprint\n\u00b6\n\n\nThe SMB Blueprint solution accelerator is a fast go to market solution to onboard Azure and Office 365.\n\n\nThe Microsoft Cloud platform consists of a vast set of technologies that allow businesses to get productive very rapidly. \nWhile the provisioning of IT resources has become a fast process, their design is still the resposibility of the business owners.\nFor small businesses that just want to get to work without spending budget and effort into their IT platform,\nthis turnkey solution has been build. This solution allows either the business owner or their hosting partners\nto quickly rollout an IT environment that adheres to Microsoft's best-practices and standards.\n\n\nThe solution is developed by Microsoft in collaboration with Inovativ",
            "title": "About"
        },
        {
            "location": "/about/#about-smbblueprint",
            "text": "The SMB Blueprint solution accelerator is a fast go to market solution to onboard Azure and Office 365.  The Microsoft Cloud platform consists of a vast set of technologies that allow businesses to get productive very rapidly. \nWhile the provisioning of IT resources has become a fast process, their design is still the resposibility of the business owners.\nFor small businesses that just want to get to work without spending budget and effort into their IT platform,\nthis turnkey solution has been build. This solution allows either the business owner or their hosting partners\nto quickly rollout an IT environment that adheres to Microsoft's best-practices and standards.  The solution is developed by Microsoft in collaboration with Inovativ",
            "title": "About SMBblueprint"
        }
    ]
}